(function(){var ai=this,ac=ai._,ae={},ar=Array.prototype,ab=Object.prototype,an=Function.prototype,aw=ar.push,ah=ar.slice,au=ar.concat,ak=ab.toString,aq=ab.hasOwnProperty,ad=ar.forEach,ag=ar.map,ao=ar.reduce,aa=ar.reduceRight,at=ar.filter,ap=ar.every,aj=ar.some,X=ar.indexOf,av=ar.lastIndexOf,Y=Array.isArray,ax=Object.keys,am=an.bind,Z=function(a){return a instanceof Z?a:this instanceof Z?(this._wrapped=a,void 0):new Z(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=Z),exports._=Z):ai._=Z,Z.VERSION="1.4.4";var W=Z.each=Z.forEach=function(h,f,g){if(null!=h){if(ad&&h.forEach===ad){h.forEach(f,g)}else{if(h.length===+h.length){for(var c=0,d=h.length;d>c;c++){if(f.call(g,h[c],c,h)===ae){return}}}else{for(var b in h){if(Z.has(h,b)&&f.call(g,h[b],b,h)===ae){return}}}}}};Z.map=Z.collect=function(d,a,b){var c=[];return null==d?c:ag&&d.map===ag?d.map(a,b):(W(d,function(g,e,f){c[c.length]=a.call(b,g,e,f)}),c)};var H="Reduce of empty array with no initial value";Z.reduce=Z.foldl=Z.inject=function(f,b,c,d){var a=arguments.length>2;if(null==f&&(f=[]),ao&&f.reduce===ao){return d&&(b=Z.bind(b,d)),a?f.reduce(b,c):f.reduce(b)}if(W(f,function(h,g,e){a?c=b.call(d,c,h,g,e):(c=h,a=!0)}),!a){throw new TypeError(H)}return c},Z.reduceRight=Z.foldr=function(j,f,g,h){var c=arguments.length>2;if(null==j&&(j=[]),aa&&j.reduceRight===aa){return h&&(f=Z.bind(f,h)),c?j.reduceRight(f,g):j.reduceRight(f)}var d=j.length;if(d!==+d){var b=Z.keys(j);d=b.length}if(W(j,function(e,i,a){i=b?b[--d]:--d,c?g=f.call(h,g,j[i],i,a):(g=j[i],c=!0)}),!c){throw new TypeError(H)}return g},Z.find=Z.detect=function(d,a,b){var c;return Q(d,function(g,e,f){return a.call(b,g,e,f)?(c=g,!0):void 0}),c},Z.filter=Z.select=function(d,a,b){var c=[];return null==d?c:at&&d.filter===at?d.filter(a,b):(W(d,function(g,e,f){a.call(b,g,e,f)&&(c[c.length]=g)}),c)},Z.reject=function(c,a,b){return Z.filter(c,function(g,f,d){return !a.call(b,g,f,d)},b)},Z.every=Z.all=function(d,b,c){b||(b=Z.identity);var a=!0;return null==d?a:ap&&d.every===ap?d.every(b,c):(W(d,function(g,f,e){return(a=a&&b.call(c,g,f,e))?void 0:ae}),!!a)};var Q=Z.some=Z.any=function(d,b,c){b||(b=Z.identity);var a=!1;return null==d?a:aj&&d.some===aj?d.some(b,c):(W(d,function(g,f,e){return a||(a=b.call(c,g,f,e))?ae:void 0}),!!a)};Z.contains=Z.include=function(b,a){return null==b?!1:X&&b.indexOf===X?b.indexOf(a)!=-1:Q(b,function(c){return c===a})},Z.invoke=function(d,a){var b=ah.call(arguments,2),c=Z.isFunction(a);return Z.map(d,function(e){return(c?a:e[a]).apply(e,b)})},Z.pluck=function(b,a){return Z.map(b,function(c){return c[a]})},Z.where=function(c,a,b){return Z.isEmpty(a)?b?null:[]:Z[b?"find":"filter"](c,function(e){for(var d in a){if(a[d]!==e[d]){return !1}}return !0})},Z.findWhere=function(b,a){return Z.where(b,a,!0)},Z.max=function(d,a,b){if(!a&&Z.isArray(d)&&d[0]===+d[0]&&65535>d.length){return Math.max.apply(Math,d)}if(!a&&Z.isEmpty(d)){return -1/0}var c={computed:-1/0,value:-1/0};return W(d,function(h,f,g){var e=a?a.call(b,h,f,g):h;e>=c.computed&&(c={value:h,computed:e})}),c.value},Z.min=function(d,a,b){if(!a&&Z.isArray(d)&&d[0]===+d[0]&&65535>d.length){return Math.min.apply(Math,d)}if(!a&&Z.isEmpty(d)){return 1/0}var c={computed:1/0,value:1/0};return W(d,function(h,f,g){var e=a?a.call(b,h,f,g):h;c.computed>e&&(c={value:h,computed:e})}),c.value},Z.shuffle=function(d){var a,b=0,c=[];return W(d,function(e){a=Z.random(b++),c[b-1]=c[a],c[a]=e}),c};var al=function(a){return Z.isFunction(a)?a:function(b){return b[a]}};Z.sortBy=function(d,a,b){var c=al(a);return Z.pluck(Z.map(d,function(g,f,e){return{value:g,index:f,criteria:c.call(b,g,f,e)}}).sort(function(i,f){var g=i.criteria,h=f.criteria;if(g!==h){if(g>h||g===void 0){return 1}if(h>g||h===void 0){return -1}}return i.index<f.index?-1:1}),"value")};var P=function(g,c,d,f){var a={},b=al(c||Z.identity);return W(g,function(h,e){var i=b.call(d,h,e,g);f(a,i,h)}),a};Z.groupBy=function(c,a,b){return P(c,a,b,function(f,d,e){(Z.has(f,d)?f[d]:f[d]=[]).push(e)})},Z.countBy=function(c,a,b){return P(c,a,b,function(e,d){Z.has(e,d)||(e[d]=0),e[d]++})},Z.sortedIndex=function(k,f,g,h){g=null==g?Z.identity:al(g);for(var c=g.call(h,f),d=0,b=k.length;b>d;){var j=d+b>>>1;c>g.call(h,k[j])?d=j+1:b=j}return d},Z.toArray=function(a){return a?Z.isArray(a)?ah.call(a):a.length===+a.length?Z.map(a,Z.identity):Z.values(a):[]},Z.size=function(a){return null==a?0:a.length===+a.length?a.length:Z.keys(a).length},Z.first=Z.head=Z.take=function(c,a,b){return null==c?void 0:null==a||b?c[0]:ah.call(c,0,a)},Z.initial=function(c,a,b){return ah.call(c,0,c.length-(null==a||b?1:a))},Z.last=function(c,a,b){return null==c?void 0:null==a||b?c[c.length-1]:ah.call(c,Math.max(c.length-a,0))},Z.rest=Z.tail=Z.drop=function(c,a,b){return ah.call(c,null==a||b?1:a)},Z.compact=function(a){return Z.filter(a,Z.identity)};var G=function(c,a,b){return W(c,function(d){Z.isArray(d)?a?aw.apply(b,d):G(d,a,b):b.push(d)}),b};Z.flatten=function(b,a){return G(b,a,[])},Z.without=function(a){return Z.difference(a,ah.call(arguments,1))},Z.uniq=Z.unique=function(j,f,g,h){Z.isFunction(f)&&(h=g,g=f,f=!1);var c=g?Z.map(j,g,h):j,d=[],b=[];return W(c,function(a,i){(f?i&&b[b.length-1]===a:Z.contains(b,a))||(b.push(a),d.push(j[i]))}),d},Z.union=function(){return Z.uniq(au.apply(ar,arguments))},Z.intersection=function(b){var a=ah.call(arguments,1);return Z.filter(Z.uniq(b),function(c){return Z.every(a,function(d){return Z.indexOf(d,c)>=0})})},Z.difference=function(b){var a=au.apply(ar,ah.call(arguments,1));return Z.filter(b,function(c){return !Z.contains(a,c)})},Z.zip=function(){for(var d=ah.call(arguments),a=Z.max(Z.pluck(d,"length")),b=Array(a),c=0;a>c;c++){b[c]=Z.pluck(d,""+c)}return b},Z.object=function(f,b){if(null==f){return{}}for(var c={},d=0,a=f.length;a>d;d++){b?c[f[d]]=b[d]:c[f[d][0]]=f[d][1]}return c},Z.indexOf=function(f,b,c){if(null==f){return -1}var d=0,a=f.length;if(c){if("number"!=typeof c){return d=Z.sortedIndex(f,b),f[d]===b?d:-1}d=0>c?Math.max(0,a+c):c}if(X&&f.indexOf===X){return f.indexOf(b,c)}for(;a>d;d++){if(f[d]===b){return d}}return -1},Z.lastIndexOf=function(f,b,c){if(null==f){return -1}var d=null!=c;if(av&&f.lastIndexOf===av){return d?f.lastIndexOf(b,c):f.lastIndexOf(b)}for(var a=d?c:f.length;a--;){if(f[a]===b){return a}}return -1},Z.range=function(g,c,d){1>=arguments.length&&(c=g||0,g=0),d=arguments[2]||1;for(var f=Math.max(Math.ceil((c-g)/d),0),a=0,b=Array(f);f>a;){b[a++]=g,g+=d}return b},Z.bind=function(c,a){if(c.bind===am&&am){return am.apply(c,ah.call(arguments,1))}var b=ah.call(arguments,2);return function(){return c.apply(a,b.concat(ah.call(arguments)))}},Z.partial=function(b){var a=ah.call(arguments,1);return function(){return b.apply(this,a.concat(ah.call(arguments)))}},Z.bindAll=function(b){var a=ah.call(arguments,1);return 0===a.length&&(a=Z.functions(b)),W(a,function(c){b[c]=Z.bind(b[c],b)}),b},Z.memoize=function(c,a){var b={};return a||(a=Z.identity),function(){var d=a.apply(this,arguments);return Z.has(b,d)?b[d]:b[d]=c.apply(this,arguments)}},Z.delay=function(c,a){var b=ah.call(arguments,2);return setTimeout(function(){return c.apply(null,b)},a)},Z.defer=function(a){return Z.delay.apply(Z,[a,1].concat(ah.call(arguments,1)))},Z.throttle=function(k,f){var g,h,c,d,b=0,j=function(){b=new Date,c=null,d=k.apply(g,h)};return function(){var e=new Date,a=f-(e-b);return g=this,h=arguments,0>=a?(clearTimeout(c),c=null,b=e,d=k.apply(g,h)):c||(c=setTimeout(j,a)),d}},Z.debounce=function(f,b,c){var d,a;return function(){var g=this,e=arguments,h=function(){d=null,c||(a=f.apply(g,e))},j=c&&!d;return clearTimeout(d),d=setTimeout(h,b),j&&(a=f.apply(g,e)),a}},Z.once=function(c){var a,b=!1;return function(){return b?a:(b=!0,a=c.apply(this,arguments),c=null,a)}},Z.wrap=function(b,a){return function(){var c=[b];return aw.apply(c,arguments),a.apply(this,c)}},Z.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--){b=[a[c].apply(this,b)]}return b[0]}},Z.after=function(b,a){return 0>=b?a():function(){return 1>--b?a.apply(this,arguments):void 0}},Z.keys=ax||function(c){if(c!==Object(c)){throw new TypeError("Invalid object")}var a=[];for(var b in c){Z.has(c,b)&&(a[a.length]=b)}return a},Z.values=function(c){var a=[];for(var b in c){Z.has(c,b)&&a.push(c[b])}return a},Z.pairs=function(c){var a=[];for(var b in c){Z.has(c,b)&&a.push([b,c[b]])}return a},Z.invert=function(c){var a={};for(var b in c){Z.has(c,b)&&(a[c[b]]=b)}return a},Z.functions=Z.methods=function(c){var a=[];for(var b in c){Z.isFunction(c[b])&&a.push(b)}return a.sort()},Z.extend=function(a){return W(ah.call(arguments,1),function(b){if(b){for(var c in b){a[c]=b[c]}}}),a},Z.pick=function(c){var a={},b=au.apply(ar,ah.call(arguments,1));return W(b,function(d){d in c&&(a[d]=c[d])}),a},Z.omit=function(d){var b={},c=au.apply(ar,ah.call(arguments,1));for(var a in d){Z.contains(c,a)||(b[a]=d[a])}return b},Z.defaults=function(a){return W(ah.call(arguments,1),function(b){if(b){for(var c in b){null==a[c]&&(a[c]=b[c])}}}),a},Z.clone=function(a){return Z.isObject(a)?Z.isArray(a)?a.slice():Z.extend({},a):a},Z.tap=function(b,a){return a(b),b};var L=function(g,q,b,k){if(g===q){return 0!==g||1/g==1/q}if(null==g||null==q){return g===q}g instanceof Z&&(g=g._wrapped),q instanceof Z&&(q=q._wrapped);var p=ak.call(g);if(p!=ak.call(q)){return !1}switch(p){case"[object String]":return g==q+"";case"[object Number]":return g!=+g?q!=+q:0==g?1/g==1/q:g==+q;case"[object Date]":case"[object Boolean]":return +g==+q;case"[object RegExp]":return g.source==q.source&&g.global==q.global&&g.multiline==q.multiline&&g.ignoreCase==q.ignoreCase}if("object"!=typeof g||"object"!=typeof q){return !1}for(var h=b.length;h--;){if(b[h]==g){return k[h]==q}}b.push(g),k.push(q);var m=0,d=!0;if("[object Array]"==p){if(m=g.length,d=m==q.length){for(;m--&&(d=L(g[m],q[m],b,k));){}}}else{var l=g.constructor,j=q.constructor;if(l!==j&&!(Z.isFunction(l)&&l instanceof l&&Z.isFunction(j)&&j instanceof j)){return !1}for(var v in g){if(Z.has(g,v)&&(m++,!(d=Z.has(q,v)&&L(g[v],q[v],b,k)))){break}}if(d){for(v in q){if(Z.has(q,v)&&!m--){break}}d=!m}}return b.pop(),k.pop(),d};Z.isEqual=function(b,a){return L(b,a,[],[])},Z.isEmpty=function(b){if(null==b){return !0}if(Z.isArray(b)||Z.isString(b)){return 0===b.length}for(var a in b){if(Z.has(b,a)){return !1}}return !0},Z.isElement=function(a){return !(!a||1!==a.nodeType)},Z.isArray=Y||function(a){return"[object Array]"==ak.call(a)},Z.isObject=function(a){return a===Object(a)},W(["Arguments","Function","String","Number","Date","RegExp"],function(a){Z["is"+a]=function(b){return ak.call(b)=="[object "+a+"]"}}),Z.isArguments(arguments)||(Z.isArguments=function(a){return !(!a||!Z.has(a,"callee"))}),"function"!=typeof/./&&(Z.isFunction=function(a){return"function"==typeof a}),Z.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},Z.isNaN=function(a){return Z.isNumber(a)&&a!=+a},Z.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==ak.call(a)},Z.isNull=function(a){return null===a},Z.isUndefined=function(a){return a===void 0},Z.has=function(b,a){return aq.call(b,a)},Z.noConflict=function(){return ai._=ac,this},Z.identity=function(a){return a},Z.times=function(f,b,c){for(var d=Array(f),a=0;f>a;a++){d[a]=b.call(c,a)}return d},Z.random=function(b,a){return null==a&&(a=b,b=0),b+Math.floor(Math.random()*(a-b+1))};var K={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};K.unescape=Z.invert(K.escape);var C={escape:RegExp("["+Z.keys(K.escape).join("")+"]","g"),unescape:RegExp("("+Z.keys(K.unescape).join("|")+")","g")};Z.each(["escape","unescape"],function(a){Z[a]=function(b){return null==b?"":(""+b).replace(C[a],function(c){return K[a][c]})}}),Z.result=function(c,a){if(null==c){return null}var b=c[a];return Z.isFunction(b)?b.call(c):b},Z.mixin=function(a){W(Z.functions(a),function(b){var c=Z[b]=a[b];Z.prototype[b]=function(){var d=[this._wrapped];return aw.apply(d,arguments),U.call(this,c.apply(Z,d))}})};var J=0;Z.uniqueId=function(b){var a=++J+"";return b?b+a:a},Z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,af={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\t|\u2028|\u2029/g;Z.template=function(f,m,b){var h;b=Z.defaults({},b,Z.templateSettings);var l=RegExp([(b.escape||z).source,(b.interpolate||z).source,(b.evaluate||z).source].join("|")+"|$","g"),g=0,k="__p+='";f.replace(l,function(c,i,n,a,p){return k+=f.slice(g,p).replace(V,function(e){return"\\"+af[e]}),i&&(k+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(k+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),a&&(k+="';\n"+a+"\n__p+='"),g=p+c.length,c}),k+="';\n",b.variable||(k="with(obj||{}){\n"+k+"}\n"),k="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+k+"return __p;\n";try{h=Function(b.variable||"obj","_",k)}catch(d){throw d.source=k,d}if(m){return h(m,Z)}var j=function(a){return h.call(this,a,Z)};return j.source="function("+(b.variable||"obj")+"){\n"+k+"}",j},Z.chain=function(a){return Z(a).chain()};var U=function(a){return this._chain?Z(a).chain():a};Z.mixin(Z),W(["pop","push","reverse","shift","sort","splice","unshift"],function(b){var a=ar[b];Z.prototype[b]=function(){var c=this._wrapped;return a.apply(c,arguments),"shift"!=b&&"splice"!=b||0!==c.length||delete c[0],U.call(this,c)}}),W(["concat","join","slice"],function(b){var a=ar[b];Z.prototype[b]=function(){return U.call(this,a.apply(this._wrapped,arguments))}}),Z.extend(Z.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);(function(){window.namespace=function(key,value){if(2===arguments.length){var nsArray=key.split("."),tmp=window,i=0,nsKey;for(;i<nsArray.length;i++){nsKey=nsArray[i];if(i===(nsArray.length-1)){if(tmp[nsKey]){console.error("namespace aleady exist :"+key+"|"+value+"|"+tmp[nsKey])}else{tmp[nsKey]=value}break}tmp[nsKey]||(tmp[nsKey]={});tmp=tmp[nsKey]}return tmp}if(1===arguments.length){try{return eval("window."+key)}catch(e){return undefined}}};window._define=function(moduleName,factory){if(window.define){return window.define(arguments[arguments.length-1])}var module={},exports=module.exports={};namespace(moduleName)||namespace(moduleName,(factory(null,exports,module)||module.exports))}})();_define("taobao.utils.config",function(b,a){var d="m",c="12574478";if(window.location.host==="localhost"||window.location.host.match(".*\\waptest\\.(taobao|tmall|etao|alibaba|alipay|aliyun)\\.com.*")){d="waptest";c="4272"}else{if(window.location.host.match(".*\\wapa\\.(taobao|tmall|etao|alibaba|alipay|aliyun)\\.com.*")){d="wapa"}else{if(window.location.host.match(".*\\m\\.(taobao|tmall|etao|alibaba|alipay|aliyun)\\.com.*")){d="m"}}}a.sysType=d||"m";a.defaultAppKey=c||"12574478"});_define("taobao.utils.cookie",function(b,a){a.isCookieEnable=function(){if(!window.navigator.cookieEnabled){return false}var d="_s_cookie_",c=this.getCookie(d);this.setCookie(d,"1");if(c==="1"){this.delCookie(d);return true}return false};a.getCookieVal=function(d){var c=document.cookie.indexOf(";",d);if(c===-1){c=document.cookie.length}return window.unescape(decodeURIComponent(document.cookie.substring(d,c)))};a.getCookie=function(f){var d=f+"=",h=d.length,c=document.cookie.length,g=0,e;while(g<c){e=g+h;if(document.cookie.substring(g,e)===d){return this.getCookieVal(e)}g=document.cookie.indexOf(" ",g)+1;if(g===0){break}}return null};a.setCookie=function(e,i){var g=window.location.host,d=g.indexOf("."),f=g.substring(0,d),c=(arguments.length>2)?arguments[2]:null,h=new Date();if(f!=="waptest"&&f!=="wapa"&&f!=="m"&&(g.indexOf("taobao")>-1||g.indexOf("tmall")>-1)){g=g.substr(d+1)}if(c==null){document.cookie=e+"="+window.escape(i)+";path=/;domain="+g}else{h.setTime(h.getTime()+(c*1000));document.cookie=e+"="+window.escape(i)+";path=/;domain="+g+";expires="+h.toGMTString()}};a.delCookie=function(c){var e=new Date(),d=this.getCookie(c);e.setTime(e.getTime()-1);document.cookie=c+"="+d+"; expires="+e.toGMTString()}});_define("taobao.utils.encode.md5",function(){return function(s){function z(b,a){return(b<<a)|(b>>>(32-a))}function H(f,b){var h,a,d,g,c;d=(f&2147483648);g=(b&2147483648);h=(f&1073741824);a=(b&1073741824);c=(f&1073741823)+(b&1073741823);if(h&a){return(c^2147483648^d^g)}if(h|a){if(c&1073741824){return(c^3221225472^d^g)}else{return(c^1073741824^d^g)}}else{return(c^d^g)}}function U(a,c,b){return(a&c)|((~a)&b)}function T(a,c,b){return(a&b)|(c&(~b))}function S(a,c,b){return(a^c^b)}function Q(a,c,b){return(c^(a|(~b)))}function v(h,g,aa,Z,f,i,k){h=H(h,H(H(U(g,aa,Z),f),k));return H(z(h,i),g)}function j(h,g,aa,Z,f,i,k){h=H(h,H(H(T(g,aa,Z),f),k));return H(z(h,i),g)}function F(h,g,aa,Z,f,i,k){h=H(h,H(H(S(g,aa,Z),f),k));return H(z(h,i),g)}function u(h,g,aa,Z,f,i,k){h=H(h,H(H(Q(g,aa,Z),f),k));return H(z(h,i),g)}function e(f){var i;var d=f.length;var c=d+8;var b=(c-(c%64))/64;var h=(b+1)*16;var k=new Array(h-1);var a=0;var g=0;while(g<d){i=(g-(g%4))/4;a=(g%4)*8;k[i]=(k[i]|(f.charCodeAt(g)<<a));g++}i=(g-(g%4))/4;a=(g%4)*8;k[i]=k[i]|(128<<a);k[h-2]=d<<3;k[h-1]=d>>>29;return k}function t(c){var b="",d="",f,a;for(a=0;a<=3;a++){f=(c>>>(a*8))&255;d="0"+f.toString(16);b=b+d.substr(d.length-2,2)}return b}function w(b){b=b.replace(/\r\n/g,"\n");var a="";for(var f=0;f<b.length;f++){var d=b.charCodeAt(f);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a}var E=[],L,m,G,y,l,Y,X,W,V,O=7,M=12,J=17,I=22,D=5,C=9,B=14,A=20,r=4,q=11,p=16,o=23,R=6,P=10,N=15,K=21;s=w(s);E=e(s);Y=1732584193;X=4023233417;W=2562383102;V=271733878;for(L=0;L<E.length;L+=16){m=Y;G=X;y=W;l=V;Y=v(Y,X,W,V,E[L+0],O,3614090360);V=v(V,Y,X,W,E[L+1],M,3905402710);W=v(W,V,Y,X,E[L+2],J,606105819);X=v(X,W,V,Y,E[L+3],I,3250441966);Y=v(Y,X,W,V,E[L+4],O,4118548399);V=v(V,Y,X,W,E[L+5],M,1200080426);W=v(W,V,Y,X,E[L+6],J,2821735955);X=v(X,W,V,Y,E[L+7],I,4249261313);Y=v(Y,X,W,V,E[L+8],O,1770035416);V=v(V,Y,X,W,E[L+9],M,2336552879);W=v(W,V,Y,X,E[L+10],J,4294925233);X=v(X,W,V,Y,E[L+11],I,2304563134);Y=v(Y,X,W,V,E[L+12],O,1804603682);V=v(V,Y,X,W,E[L+13],M,4254626195);W=v(W,V,Y,X,E[L+14],J,2792965006);X=v(X,W,V,Y,E[L+15],I,1236535329);Y=j(Y,X,W,V,E[L+1],D,4129170786);V=j(V,Y,X,W,E[L+6],C,3225465664);W=j(W,V,Y,X,E[L+11],B,643717713);X=j(X,W,V,Y,E[L+0],A,3921069994);Y=j(Y,X,W,V,E[L+5],D,3593408605);V=j(V,Y,X,W,E[L+10],C,38016083);W=j(W,V,Y,X,E[L+15],B,3634488961);X=j(X,W,V,Y,E[L+4],A,3889429448);Y=j(Y,X,W,V,E[L+9],D,568446438);V=j(V,Y,X,W,E[L+14],C,3275163606);W=j(W,V,Y,X,E[L+3],B,4107603335);X=j(X,W,V,Y,E[L+8],A,1163531501);Y=j(Y,X,W,V,E[L+13],D,2850285829);V=j(V,Y,X,W,E[L+2],C,4243563512);W=j(W,V,Y,X,E[L+7],B,1735328473);X=j(X,W,V,Y,E[L+12],A,2368359562);Y=F(Y,X,W,V,E[L+5],r,4294588738);V=F(V,Y,X,W,E[L+8],q,2272392833);W=F(W,V,Y,X,E[L+11],p,1839030562);X=F(X,W,V,Y,E[L+14],o,4259657740);Y=F(Y,X,W,V,E[L+1],r,2763975236);V=F(V,Y,X,W,E[L+4],q,1272893353);W=F(W,V,Y,X,E[L+7],p,4139469664);X=F(X,W,V,Y,E[L+10],o,3200236656);Y=F(Y,X,W,V,E[L+13],r,681279174);V=F(V,Y,X,W,E[L+0],q,3936430074);W=F(W,V,Y,X,E[L+3],p,3572445317);X=F(X,W,V,Y,E[L+6],o,76029189);Y=F(Y,X,W,V,E[L+9],r,3654602809);V=F(V,Y,X,W,E[L+12],q,3873151461);W=F(W,V,Y,X,E[L+15],p,530742520);X=F(X,W,V,Y,E[L+2],o,3299628645);Y=u(Y,X,W,V,E[L+0],R,4096336452);V=u(V,Y,X,W,E[L+7],P,1126891415);W=u(W,V,Y,X,E[L+14],N,2878612391);X=u(X,W,V,Y,E[L+5],K,4237533241);Y=u(Y,X,W,V,E[L+12],R,1700485571);V=u(V,Y,X,W,E[L+3],P,2399980690);W=u(W,V,Y,X,E[L+10],N,4293915773);X=u(X,W,V,Y,E[L+1],K,2240044497);Y=u(Y,X,W,V,E[L+8],R,1873313359);V=u(V,Y,X,W,E[L+15],P,4264355552);W=u(W,V,Y,X,E[L+6],N,2734768916);X=u(X,W,V,Y,E[L+13],K,1309151649);Y=u(Y,X,W,V,E[L+4],R,4149444226);V=u(V,Y,X,W,E[L+11],P,3174756917);W=u(W,V,Y,X,E[L+2],N,718787259);X=u(X,W,V,Y,E[L+9],K,3951481745);Y=H(Y,m);X=H(X,G);W=H(W,y);V=H(V,l)}var n=t(Y)+t(X)+t(W)+t(V);return n.toLowerCase()}});_define("taobao.utils.uri.getParam",function(){return function(a){var b=this.queryMap||(function(e){if(e.length<1){return""}e=e.substr(1);var f=e.split("&"),g={},c,d;for(d in f){c=f[d].split("=");g[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return g})(location.search);this.queryMap=b;if(a){return b[a]}else{return b}}});_define("taobao.utils.uri.getUrl",function(b){var a=b?b("../config.js"):namespace("taobao.utils.config"),d=b?b("./parameter.js"):namespace("taobao.utils.uri.getParam"),e={protocol:"http://",sysType:a.sysType,defaultDomain:"taobao.com"},c=(function(k){var f="",h,g,j;for(h in k){g=k[h];j=d(g);if(j&&j!==""){f+=("&"+g+"="+j)}}return f})(["ttid","sprefer"]);return function(h){function f(l,i){if(!i){return l}if(l.indexOf("?")<0){l+="?"}var j=l.charAt(l.length-1),k=i.charAt(0);if("?"===j||"&"===j){if("?"===k||"&"===k){return l+i.substr(1)}else{return l+i}}else{if("?"===k||"&"===k){return l+i}else{return l+"&"+i}}}var g=h.url||(function(i){var j=h.host||(h.subdomain+"."+i.sysType+"."+i.defaultDomain);return i.protocol+j+"/"+h.path})(e);(g.indexOf("?")>0)||(g+="?");g=f(g,c);if(h.data){g=f(g,(function(m){var n="",l,i;if(null==m){return n}for(l in m){i=m[l];if(null!=i&&""!==i){n+=(l+"="+encodeURIComponent(("object"===typeof i)?JSON.stringify(i):i)+"&")}}if(""!==n&&(n.length-1)===n.lastIndexOf("&")){n=n.substr(0,n.length-1)}return n})(h.data))}return g}});_define("taobao.biz.mtop",function(d,f){var g=d?d("zepto","$"):namespace("$"),b=d?d("../../utils/cookie"):namespace("taobao.utils.cookie"),k=d?d("../../utils/encode/md5"):namespace("taobao.utils.encode.md5"),m=d?d("../../utils/uri/uri.js"):namespace("taobao.utils.uri.getUrl"),p="J_app_key",o="h5ApiUpdate.do",l="_m_h5_tk",j=0,e=5,a=false,n=(function(){var q=document.getElementById(p);if(q){return q.value}else{return"12574478"}})(),h=[];f.getApi=function(s,q,u,r,w,t){r.api=s;r.v=q||"*";r.data=typeof(u)==="string"?JSON.parse(u):u;h.push({params:r,callback:w,errorback:t});if(!a){a=true;i()}};var i=function(){if(h.length>0){new c(h.pop(0)).run()}else{a=false}};var c=function(q){this.options=q;this.appKey=n;this.appToken=this.getToken();this.t=(new Date()).getTime();this.callback=q.callback;this.errorback=q.errorback;this.isChunk=!!q.params.apis};g.extend(c.prototype,{run:function(){var s=this,q=this._genSignUrl(),r={type:"GET",url:q,dataType:"jsonp",timeout:20000,success:function(t){var u=(t.ret?t.ret:"").toString();if(-1!==u.indexOf("SUCCESS::")){j=0}else{if(-1!==u.indexOf("TOKEN_EMPTY::")||-1!==u.indexOf("TOKEN_EXOIRED::")){j++;if(j<e){new c(s.options).run();return}else{b.delCookie(l);console.log("try exceed times")}}}if(s.callback){s.callback(t)}i()},error:function(t){if(s.errorback){s.errorback(t)}i()},complete:function(u,t){if(t!=="success"&&s.errorback){s.errorback(t)}i()}};g.ajax(r)},getToken:function(){return(b.getCookie(l)||"").split("_")[0]},_genSignUrl:function(){var r="rest/"+o,q=m({subdomain:"api",path:r,data:this.options.params});return this._addJsonParam(q)+"&appKey="+this.appKey+"&sign="+this._sign(JSON.stringify(this.options.params.data))+"&t="+this.t},_addJsonParam:function(r){if(-1===r.indexOf("callback=")){var q=r.indexOf("?");return r.substr(0,q)+"?callback=?&type=jsonp&"+r.substr(q+1,r.length)}else{return r}},_sign:function(q){var r=this.appToken+"&"+this.t+"&"+this.appKey+"&"+q;r=k(r);return r}})});weTao={isDesktop:false};(function(a){var d=/(\bwindows\b|\bmacintosh\b|\blinux\b|\bunix\b)/;if(d.exec(navigator.userAgent.toLowerCase())){a.isDesktop=true;$("body").addClass("desktop")}a.getDpi=function(){var j=1;if(window.devicePixelRatio){j=window.devicePixelRatio}return j};a.isRetina=function(){if(this.getDpi()>=2){return true}else{return false}};var f=a.getDpi(),i,c=[110,150,170,180,220,240,290,450,570],g=[120,145,230,270,290,310,360,460,580];a.setRatio=function(j){i=j};function b(){return i||f}a.trim=function(p){if(p.isXz){return a.trimXz(p)}var j={};var n=p.ratio||b();var k=e(p.expWidth*n,p.rWidth,c),q=p.url,m=p.expWidth,o=p.rWidth,l=p.rHeight;if(k){q+=("_"+k+"x10000.jpg");o=k;l=p.rHeight*o/p.rWidth}j.expWidth=m;j.expHeight=m*l/p.rWidth;j.rWidth=o;j.rHeight=l;j.url=q;return j};a.trimXz=function(k){var s={};var n=k.ratio||b();var r=k.url,m=k.rHeight>k.rWidth,j=e(k.expWidth*n,m?k.rHeight:k.rWidth,g),p,l=k.expWidth,o=k.rWidth,q=k.rHeight;if(j){r+=("_"+j+"x"+j+"xz.jpg");if(m){q=j;o=j<o?j:o}else{o=j;q=j<q?j:q}}p=l*q/o;s.expWidth=l;s.expHeight=p;s.rWidth=o;s.rHeight=q;s.url=r;return s};function e(m,n,k){var l;if(m>n){l=n}else{l=h(m,k)}if(l){var j=k[k.length-1];if(j<l){l=j}if(l===n){l=undefined}}return l}function h(n,k){var j=k[k.length-1];if(j<=n){return j}var m=0;for(var l=k.length;l>=0;l--){if(k[l]<=n){if(k[l]==n){m=n}else{l<(k.length-1)&&(m=k[l+1])}break}}return m}})(weTao);function getBetterImg(b,d,a,c){return weTao.trim({url:b,expWidth:d,rWidth:a,isXz:c}).url}function timestamps(c){if(typeof c=="string"){c=parseInt(c)}var f=1000,g=f*60,d=g*60,b=d*24;var k=null,a=new Date(),j=a.getTime(),h="";if(typeof c=="number"){k=c}else{if(typeof c=="object"){if(c.getTime){k=c.getTime()}}}if(k!=NaN){var i=new Date();i.setTime(k)}var e=i.getMinutes();if(e<10){e="0"+e}if(k==NaN){h="-"}else{if(k>j){h="刚刚"}else{if(k>j-f*10){h="刚刚"}else{if(k>j-g){h=parseInt((j-k)/f/10).toString()+"0秒前"}else{if(k>j-d){h=parseInt((j-k)/g)+"分钟前"}else{if(i.getYear()==a.getYear()&&i.getMonth()==a.getMonth()&&i.getDate()==a.getDate()){h="今天"+i.getHours()+":"+e}else{if(i.getYear()==a.getYear()&&i.getMonth()==a.getMonth()&&a.getDate()-i.getDate()==1){h="昨天"+i.getHours()+":"+e}else{if(i.getYear()==a.getYear()){h=(i.getMonth()+1)+"月"+i.getDate()+"日 "+i.getHours()+":"+e}else{h=i.getFullYear()+"年"+(i.getMonth()+1)+"月"+i.getDate()+"日 "+i.getHours()+":"+e}}}}}}}}return h}function isLongImg(a){return a&&(parseFloat(a.picWidth)/parseFloat(a.picHeight)>1.45)}function isSquareImg(a){return a&&(parseFloat(a.picWidth)/parseFloat(a.picHeight)<=1.45)}function setOrientation(){var b;if(window.orientation){b=Math.abs(window.orientation)===90?"landscape":"portrait"}else{if(window.screen){var c=screen.width;var a=screen.height;b=(c>a)?"landscape":"portrait"}else{b="unknow"}}return b}function feedImageSizeStyle(e,f){var d=parseInt(e);var a=parseInt(f);var b;b=window.innerWidth-30;if(setOrientation()=="portrait"){b=window.innerWidth-30}else{b=(window.innerWidth>window.innerHeight?window.innerWidth:window.innerHeight)-30}var c=0;if(d<a){if(d<b){c=(b/d)*a;if(c>b){c=b}}else{c=b}}else{if(d<b){c=(b/d)*a}else{c=a/(d/b)}}if(!weTao.isDesktop){if(!c){return"width: 100%"}else{return"width: "+b+"px; height: "+c+"px;"}}}function detailImageSizeStyle(e,f){var d=parseInt(e);var a=parseInt(f);var b=$("#content")[0].offsetWidth-24;var c=0;if(d<b){c=(b/d)*a}else{c=a/(d/b)}if(!c){return"width: 100%"}else{return"width: "+b+"px; height: "+c+"px;"}}var numToBinary=function(b){var d="";var c=b;var a;return d};var noHelper=function(b){var a=numToBinary(b),c=false;a="0000"+a;return a.substring(a.length-4,a.length-3)!="1"};var formatFans=function(b){if(typeof b=="string"){b=parseInt(b)}if(b>99999999){b=b.toString();return b.substr(0,b.length-8)+"亿"}else{if(b>999999){b=b.toString();return b.substr(0,b.length-4)+"万"}else{if(b>9999){b=b.toString();var a=b.charAt(b.length-4);return b.substr(0,b.length-4)+(a=="0"?"":"."+a)+"万"}}}return b.toString()};var getAccountInfoHtml=function(b){var a=_.template($("#detail_accinfo_tpl").html());return a(b)};var getAccountInfoData=function(a){namespace("taobao.biz.mtop").getApi("mtop.sns.pubAccount.info","2.0",{snsId:a},{},function(b){var e=b.data;var c=getAccountInfoHtml(e);$("#detailPage div.account").html(c);if($(".qr-container").length){$(".qr-container").html('<img src="'+e.two2CodeUrl+'" class="qr-code">')}},function(b){})};var linkUrlFormat=function(a){if(a){if(a.indexOf("detail.tmall.com")!=-1){var b=a.match(/id=[\d]+/);b=b&&b[0].split("=");if(b&&b.length>1){return"http://a.m.tmall.com/i"+b[1]+".htm"}}}return a};var getDetailInfoHtml=function(c){var b="";b+="<h1>"+c.title+"</h1>";if(c.time){b+='<p class="detail-info">';b+='<span class="icon-clock pub-time">'+timestamps(c.time)+"</span>";b+="</p>"}for(var a=0;a<c.tiles.length;a++){if(c.tiles[a].type=="pic"){b+='<div class="media">';if(weTao.isDesktop){b+='<img class="lazy" src="'+getBetterImg(c.tiles[a].path,406,parseInt(c.tiles[a].picWidth),true)+'" style="'+detailImageSizeStyle(c.tiles[a].picWidth,c.tiles[a].picHeight)+'"/>'}else{b+='<img class="lazy" style="'+detailImageSizeStyle(c.tiles[a].picWidth,c.tiles[a].picHeight)+'" dataimg="'+getBetterImg(c.tiles[a].path,window.innerWidth-30,parseInt(c.tiles[a].picWidth))+'" src="http://a.tbcdn.cn/mw/webapp/fav/img/grey.gif"/>'}b+="</div>"}else{if(c.tiles[a].type=="text"){b+='<p class="text">'+c.tiles[a].text.replace(/(\n)+/g,'<span style="height:5px;display:block"></span>')+"</p>"}else{if(c.tiles[a].type=="picItem"){b+='<div class="media">';b+='<a style="display: block" href="'+getItemDetailUrl("a",{itemId:c.tiles[a].item.id})+'" class="item">';b+='<img class="lazy"';if(weTao.isDesktop){b+=' src="'+getBetterImg(c.tiles[a].path,406,parseInt(c.tiles[a].picWidth),true)+'"';b+=' style="'+detailImageSizeStyle(c.tiles[a].picWidth,c.tiles[a].picHeight)+'"/>'}else{b+=' dataimg="'+getBetterImg(c.tiles[a].path,window.innerWidth-30,parseInt(c.tiles[a].picWidth))+'"';b+=' style="'+detailImageSizeStyle(c.tiles[a].picWidth,c.tiles[a].picHeight)+'"';b+=' src="http://a.tbcdn.cn/mw/webapp/fav/img/grey.gif"/>'}b+='<div id="price'+c.tiles[a].item.id+'" class="price" style="display: none;"></div></a></div>'}}}}if(c.linkUrl){b+='<a href="'+linkUrlFormat(c.linkUrl)+'" class="more-content log" data-log="linkUrl">';b+='<span class="link-icon"></span>';b+='<span class="link-title">'+(c.linkTitle||"更多内容")+"</span></a>"}window.abc=linkUrlFormat(c.linkUrl);return b};getItemDetailUrl=function(b,c){var a=namespace("taobao.utils.uri").getUrl({subdomain:"a",path:"i"+c.itemId+".htm"});if(a.indexOf("?")==-1){a=a+"?ap_ref="+encodeURIComponent(window.location.href)}else{a=a+"&ap_ref="+encodeURIComponent(window.location.href)}return a};var getTemplate=function(c,b,a){namespace("taobao.biz.mtop").getApi("mtop.sns.component.template","2.0",{componentId:c.cid},{},function(e){var f=e.data;b&&b(f)},function(d){a&&a(d)})};var getDetailByComponent=function(c,a){var b=_.template($("#detail_plugin").html());$("#detailPage div.main").addClass("plugIn_content").html(b(c))};var getPrices=function(a,b){var d=[];a.tiles&&_.each(a.tiles,function(e){e.item&&d.push(e.item.id)});if(d.length==0){return false}var c=[];$.ajax({type:"GET",dataType:"json",url:namespace("taobao.utils.uri").getUrl({subdomain:"s",path:"search_turn_page_iphone.htm"})+"nid="+d.join(",")+"&callback=?",success:function(e){if(e.result&&"true"==e.result&&e.listItem){_.each(e.listItem,function(f){c.push({id:f.itemNumId,price:f.price})})}b&&b.call(arguments.callee,c)},error:function(e){console.log(e);b&&b.call(arguments.callee,a)}})};var getDetailData=function(a,b){namespace("taobao.biz.mtop").getApi("mtop.sns.feed.detail","2.0",{snsId:a,feedId:b},{},function(c){if(typeof c.data.componentId!="undefined"){$("#detailPage div.main").html(getDetailByComponent(c.data))}else{$("#detailPage div.main").html(getDetailInfoHtml(c.data))}getPrices(c.data,function(g){for(var f=0,e=g.length;f<e;f++){$("#price"+g[f].id).text(g[f].price+"元").show()}});$("#detailPage div.main .more-content").bind("click",function(f){var d=$(f.currentTarget).attr("href").replace("&sprefer","%26sprefer");window.location=window.abc})},function(c){})};$(function(){var a=function(){var b=window.location.hash.split("/");getAccountInfoData(b[1]);getDetailData(b[1],b[2])};a();window.onhashchange=function(){a()}});